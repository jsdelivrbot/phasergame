<!DOCTYPE html>
<html>
	<head>
		<title>phaser game</title>

		<link rel="stylesheet" type="text/css" href="css/foundation.min.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		
		<script src="js/lib/jquery.js" type="text/javascript"></script>
		<script src="js/lib/modernizr.min.js" type="text/javascript"></script>
		<script src="js/lib/foundation.min.js" type="text/javascript"></script>
		<script src="js/lib/knockout.js" type="text/javascript"></script>
		<script src="js/lib/knockout-mapping.js" type="text/javascript"></script>
		<script src="js/lib/phaser.min.js" type="text/javascript"></script>
		<script src="js/lib/socket.io.js" type="text/javascript"></script>
		<script src="js/lib/klass.js" type="text/javascript"></script>
		<script src="js/lib/jspath.min.js" type="text/javascript"></script>
		<script src="js/lib/underscore-min.js" type="text/javascript"></script>

		<script src="js/app/init/functions.js" type="text/javascript"></script>
		<script src="js/app/init/preload.js" type="text/javascript"></script>
		<script src="js/app/objs/players.js" type="text/javascript"></script>
		<script src="js/app/objs/player.js" type="text/javascript"></script>
		<script src="js/app/objs/playerControl.js" type="text/javascript"></script>
		<script src="js/app/ctrl/interface.js" type="text/javascript"></script>
		<script src="js/app/ctrl/server.js" type="text/javascript"></script>
		<script src="js/app/ctrl/sound.js" type="text/javascript"></script>
		<script src="js/app/stateObjs/game.js" type="text/javascript"></script>
		<script src="js/app/stateObjs/connect.js" type="text/javascript"></script>

		<!-- main -->
		<script src="js/app/app.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="game">
			<div id="ui">
				<div id="loading-overlay">
					<div class="progress" id="loading-bar">
					  	<span class="meter"></span>
					</div>
				</div>
			</div>
		</div>

		<div id="chat" class="panel large-4">

	  		<div id="chat-in-messages" data-bind="foreach: chat.activeChanel.messages">
	  			<div class="chat-message"><h5 data-bind="text: player" style="display: inline;"></h5>: <p data-bind="text: message" style="display: inline;"></p></div>
	  		</div>
	  		
			<div class="off-canvas-wrap" data-offcanvas style="height: 100%;">
			  	<div class="inner-wrap" style="height: 100%;">

			  	 	<nav class="tab-bar">
				      	<section class="left-small">
				      	  	<a class="left-off-canvas-toggle menu-icon" href="#"><span></span></a>
				      	</section>

				      	<section class="middle tab-bar-section">
				      	  	<h1 class="title">Chat: <span data-bind="text: chat.activeChanel.title"></span></h1>
				      	</section>

				      	<section class="right-small">
				      	  	<a class="right-off-canvas-toggle menu-icon" href="#"><span></span></a>
				      	</section>
				    </nav>

			  	 	<!-- Off Canvas Menu -->
			  	 	<nav class="left-off-canvas-menu">
					  	<ul class="off-canvas-list">
					  	  	<li>
						  	  	<label>Chanels</label> 
					  	  	</li>
					  	  	<div id="chat-chanels" data-bind="foreach: chat.chanels">
					  	  		<li><a href="#" data-bind="text: title, click: $root.chat.chanelSelect"></a></li>
					  	  	</div>
					  	  	<li>
							    <div class="large-12 columns" style="padding: 0px;">
							      	<div class="row collapse">
							      	  	<div class="small-8 columns">
							      	  	  	<input id="chat-new-title" type="text" placeholder="Title">
							      	  	</div>
							      	  	<div class="small-4 columns">
							      	  	  	<a id="chat-new" href="#" class="button postfix" data-bind="click: chat.create">Create</a>
							      	  	</div>
							      	</div>
							    </div>
					  	  	</li>
					  	</ul>
					</nav>

			  	 	<nav class="right-off-canvas-menu">
					  	<ul class="off-canvas-list">
					        <li class="has-submenu">
					        	<a href="#">Actions</a>
					            <ul class="right-submenu">
					                <li class="back"><a href="#">Back</a></li>
					                <li data-bind="visible: chat.activeChanel.canLeave == true && chat.activeChanel.own == false"><a href="#" data-bind="click: chat.leave">Leave</a></li>
							  	  	<li data-bind="visible: chat.activeChanel.own">
									    <div class="large-12 columns" style="padding: 0px;">
									      	<div class="row collapse">
									      	  	<div class="small-8 columns">
									      	  	  	<input id="chat-invite-name" type="text" placeholder="Player Name">
									      	  	</div>
									      	  	<div class="small-4 columns">
									      	  	  	<a href="#" class="button postfix" data-bind="click: chat.invite">Invite</a>
									      	  	</div>
									      	</div>
									    </div>
							  	  	</li>
					                <li data-bind="visible: chat.activeChanel.own"><a href="#" data-bind="click: chat.close">Close</a></li>
					            </ul>
					        </li>
					  	</ul>
					  	<ul class="off-canvas-list">
					  	  	<li><label>Players</label></li>
					  	  	<div id="chat-players" data-bind="foreach: chat.activeChanel.players">
					  	  		<li><a href="#" data-bind="text: name"></a></li>
					  	  	</div>
					  	</ul>
					</nav>

			  	 	<div>
			  	 		<div id="chat-messages" class="content" data-bind="foreach: chat.activeChanel.messages">
						  	<div class="chat-message"><h5 data-bind="text: player" style="display: inline;"></h5>: <p data-bind="text: message" style="display: inline;"></p></div>
					  	</div>

						<form class="no-action" data-bind="event:{'submit':chat.sendMessage}">
							<input type="text" style="width: 100%;" maxlength="100" data-bind="value: chat.sendMessageVal">
						</form>
			  	 	</div>

			  		<!-- close the off-canvas menu -->
			  		<a class="exit-off-canvas"></a>
			  	</div>
			</div>
		</div>

		<div id="connect-module" class="reveal-modal xlarge" data-reveal data-bind="with: connect">
	  		<div class="row">
		  		<h4>Servers</h4>
	  		</div>
	  		<table>
				<thead>
					<tr>
						<th>Title</th>
						<th>Description</th>
						<th>Server Ip</th>
						<th>Players</th>
					</tr>
				</thead>
				<tbody data-bind="foreach: servers">
					<tr class="server" data-bind="css:{'selected': $index() === $root.connect.selectedServer(), 'pinging': status() == 0, 'failed': status() == 2}, click: $parent.select">
						<td data-bind="text: title"></td>
						<td data-bind="text: description"></td>
						<td data-bind="text: ip"></td>
						<td data-bind="text: players"></td>
					</tr>
				</tbody>
			</table>
			<div class="row">
			  	<div class="small-5 columns">
			  		<ul class="button-group">
			  		  <li><a href="#" class="button tiny" data-reveal-id="add-server-module">Add Server</a></li>
			  		  <li><a href="#" class="button tiny" data-bind="css:{'disabled': selectedServer() == -1}, click: removeServer">Remove Server</a></li>
			  		  <li><a href="#" class="button tiny" data-bind="click: refresh">Refresh</a></li>
			  		</ul>
			  	</div>
			  	<div class="small-7 columns">
			  		<form data-bind="event:{'submit':connect}">
						<div class="row">
							<div class="small-4 columns">
								<input type="email" placeholder="Email" required data-bind="value: login.email, valueUpdate: 'keyup'">
							</div>
							<div class="small-4 columns">
								<input type="password" placeholder="Password" required data-bind="value: login.password, valueUpdate: 'keyup'">
							</div>
							<div class="small-2 columns">
							 	<div class="switch">
								  	<input id="exampleCheckboxSwitch" type="checkbox" data-bind="checked: login.remember">
								  	<label for="exampleCheckboxSwitch"></label>
								</div> 
							</div>
							<div class="small-2 columns">
								<a type="submit" href="#" class="button tiny" data-bind="css:{'disabled': (selectedServer() !== -1)? servers()[selectedServer()].status() !== 1 : true }, click: connect">Connect</a>
							</div>
						</div>
					</form>
			  	</div>
			</div>
		</div>

		<div id="add-server-module" class="reveal-modal small" data-reveal data-bind="with: connect">
	  		<div class="row">
		  		<h4>Add Servers</h4>
	  		</div>
	  		<form data-bind="event: {'submit': add}">
	  			<div class="row">
	  				<input type="text" placeholder="Server Ip" data-bind="value: newServer.ip"/>
	  			</div>
	  			<div class="row">
	  				<a href="#" class="button tiny left secondary" data-reveal-id="connect-module">Cancel</a>
	  				<input class="button tiny right" type="submit" value="Ok" />
	  			</div>
	  		</form>
		</div>

		<div id="menu" class="reveal-modal full" data-reveal data-bind="with: settings">
			
		</div>
	</body>
</html>