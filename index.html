<!DOCTYPE html>
<!-- <html manifest="appcache.mf"> -->
<html>
	<head>
		<title>phaser game</title>
		<link rel="stylesheet" type="text/css" href="css/foundation.min.css">
		<link rel="stylesheet" type="text/css" href="css/foundation-icons.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		
		<script src="js/lib/jquery.js" type="text/javascript" defer></script>
		<script src="js/lib/modernizr.min.js" type="text/javascript" defer></script>
		<script src="js/lib/foundation.min.js" type="text/javascript" defer></script>
		<script src="js/lib/knockout.js" type="text/javascript" defer></script>
		<script src="js/lib/knockout-mapping.js" type="text/javascript" defer></script>
		<script src="js/lib/phaser.min.js" type="text/javascript" defer></script>
		<script src="js/lib/socket.io.js" type="text/javascript" defer></script>
		<script src="js/lib/klass.js" type="text/javascript" defer></script>
		<script src="js/lib/jspath.min.js" type="text/javascript" defer></script>
		<script src="js/lib/underscore-min.js" type="text/javascript" defer></script>
		
		<!-- main -->
		<script src="js/app/app.js" type="text/javascript" defer></script>

		<script src="js/app/init/functions.js" type="text/javascript" defer></script>
		<script src="js/app/init/preload.js" type="text/javascript" defer></script>
		<script src="js/app/objs/players.js" type="text/javascript" defer></script>
		<script src="js/app/objs/player.js" type="text/javascript" defer></script>
		<script src="js/app/objs/playerControl.js" type="text/javascript" defer></script>
		<script src="js/app/ctrl/interface.js" type="text/javascript" defer></script>
		<script src="js/app/ctrl/server.js" type="text/javascript" defer></script>
		<script src="js/app/ctrl/sound.js" type="text/javascript" defer></script>
		<script src="js/app/ctrl/items.js" type="text/javascript" defer></script>
		<script src="js/app/stateObjs/game.js" type="text/javascript" defer></script>
		<script src="js/app/stateObjs/connect.js" type="text/javascript" defer></script>
	</head>
	<body>
		<div id="game"></div>
		
		<!-- chat -->
		<div id="chat" class="panel large-4" style="display: none;" data-bind="visible: chat.activeChanel.id() !== -1">
			<div id="chat-in-messages" data-bind="foreach: chat.activeChanel.messages">
				<div class="chat-message"><h5 data-bind="text: player" style="display: inline;"></h5>: <p data-bind="text: message" style="display: inline;"></p></div>
			</div>
			
			<div class="off-canvas-wrap" data-offcanvas style="height: 100%;">
				<div class="inner-wrap" style="height: 100%;">
					<nav class="tab-bar">
						<section class="left-small">
							<a class="left-off-canvas-toggle menu-icon" href="#"><span></span></a>
						</section>
						<section class="middle tab-bar-section">
							<h1 class="title">Chat: <span data-bind="text: chat.activeChanel.title"></span></h1>
						</section>
						<section class="right-small">
							<a class="right-off-canvas-toggle menu-icon" href="#"><span></span></a>
						</section>
					</nav>
					
					<!-- Off Canvas Menu -->
					<nav class="left-off-canvas-menu">
						<ul class="off-canvas-list">
							<li>
								<label>Chanels</label>
							</li>
							<div id="chat-chanels" data-bind="foreach: chat.chanels">
								<li><a href="#" data-bind="text: title, click: $root.chat.chanelSelect"></a></li>
							</div>
							<li>
								<div class="large-12 columns" style="padding: 0px;">
									<div class="row collapse">
										<div class="small-8 columns">
											<input id="chat-new-title" type="text" placeholder="Title">
										</div>
										<div class="small-4 columns">
											<a id="chat-new" href="#" class="button postfix" data-bind="click: chat.create">Create</a>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
					
					<nav class="right-off-canvas-menu">
						<ul class="off-canvas-list">
							<li class="has-submenu">
								<a href="#">Actions</a>
								<ul class="right-submenu">
									<li class="back"><a href="#">Back</a></li>
									<li data-bind="visible: chat.activeChanel.canLeave == true && chat.activeChanel.own == false"><a href="#" data-bind="click: chat.leave">Leave</a></li>
									<li data-bind="visible: chat.activeChanel.own">
										<div class="large-12 columns" style="padding: 0px;">
											<div class="row collapse">
												<div class="small-8 columns">
													<input id="chat-invite-name" type="text" placeholder="Player Name">
												</div>
												<div class="small-4 columns">
													<a href="#" class="button postfix" data-bind="click: chat.invite">Invite</a>
												</div>
											</div>
										</div>
									</li>
									<li data-bind="visible: chat.activeChanel.own"><a href="#" data-bind="click: chat.close">Close</a></li>
								</ul>
							</li>
						</ul>
						<ul class="off-canvas-list">
							<li><label>Players</label></li>
							<div id="chat-players" data-bind="foreach: chat.activeChanel.players">
								<li><a href="#" data-bind="text: name"></a></li>
							</div>
						</ul>
					</nav>
					<div>
						<div id="chat-messages" class="content" data-bind="foreach: chat.activeChanel.messages">
							<div class="chat-message"><h5 data-bind="text: player" style="display: inline;"></h5>: <p data-bind="text: message" style="display: inline;"></p></div>
						</div>
						<form class="no-action" style="margin: 0px;" data-bind="event:{'submit':chat.sendMessage}">
							<input type="text" style="margin: 0px; width: 100%;" maxlength="100" data-bind="value: chat.sendMessageVal">
						</form>
					</div>
					<!-- close the off-canvas menu -->
					<a class="exit-off-canvas"></a>
				</div>
			</div>
		</div>
		
		<!-- loading modal -->
		<div id="loading-modal" class="reveal-modal menu large open" data-reveal style="opacity: 1; visibility: visible; top: 100px;" data-bind="with: loading">
			<i class="fi-widget modal-button" data-reveal-id="loading-settings"></i>

			<div class="top">
				<h2>PhaserGame</h2>
			</div>
			<div class="middle">
				
			</div>
			<div class="bottom panel radius">
				<span id="loading-text" class="label secondary radius" style="flex-shrink:0;">Loading...</span>
				<div id="loading-bar" class="progress large radius">
					<span class="meter"></span>
				</div>
				<a id="loading-play" href="#" class="button success radius tiny" data-bind="click: play" style="flex-shrink: 0;">Play</a>
			</div>
		</div>

		<!-- launcher settings -->
		<div id="loading-settings" class="reveal-modal menu large" data-reveal>
		  	<i class="fi-x modal-button" data-reveal-id="loading-modal"></i>
		  	
			<div class="small-6 columns">
				<fieldset data-bind="with: menu.settings.graphics">
			    	<legend>Graphics</legend>

			    	<label>Render Type</label>
			    	<select data-bind="value: renderMode, foreach: renderModes">
			    		<option data-bind="text: title, value: value"></option>
			    	</select>
			    	<div class="panel">
			    	  <p data-bind="text: renderModes()[renderMode()].desc()"></p>
			    	</div>
			  	</fieldset>
			</div>

		  	<div class="small-6 columns">
				<fieldset data-bind="with: menu.settings.sound">
			    	<legend>Sound</legend>

		    		<label>Master Volume <span class="lable" data-bind="text: Math.round(volume()*100) + '%'"></span></label>
		    		<input type="range" min="0.01" max="1" step="0.01" style="width:100%;" data-bind="value: volume, valueUpdate: 'mousemove'">

			    	<label>Mute</label>
			    	<div class="switch">
					  	<input id="settings-sound-mute2" type="checkbox" data-bind="checked: mute">
					  	<label for="settings-sound-mute2"></label>
					</div> 
			  	</fieldset>
		  	</div>
		</div>
		
		<!-- connect -->
		<div id="connect-modal" class="reveal-modal menu cant-close xlarge" data-reveal data-bind="with: connect">
			<div class="top">
				<h4>Servers</h4>
			</div>
			<div class="middle">
				<table>
					<thead>
						<tr>
							<th>Title</th>
							<th>Description</th>
							<th>Server Ip</th>
							<th>Players</th>
						</tr>
					</thead>
					<tbody data-bind="foreach: servers">
						<tr class="server" data-bind="css:{'selected': $index() === $root.connect.selectedServer(), 'pinging': status() == 0, 'failed': status() == 2}, click: $parent.select">
							<td data-bind="text: title"></td>
							<td data-bind="text: description"></td>
							<td data-bind="text: ip"></td>
							<td data-bind="text: players"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="bottom panel radius">
				<a href="#" class="button radius tiny" data-reveal-id="add-server-modal" style="flex-shrink: 0;">Add Server</a>
				<a href="#" class="button radius tiny disabled" data-bind="css:{'disabled': selectedServer() == -1}, click: removeServer" style="flex-shrink: 0;">Remove Server</a>
				<a href="#" class="button radius tiny" data-bind="click: refresh" style="flex-shrink: 0;margin-right: 20px;">Refresh</a>
				<input type="email" placeholder="Email" data-bind="css:{'error': login.failed}, value: login.email, valueUpdate: 'keyup'" style="margin-right: 20px;">
				<input type="password" placeholder="Password" data-bind="css:{'error': login.failed}, value: login.password, valueUpdate: 'keyup'" style="margin-right: 20px;">
				
				<div class="switch" style="flex-shrink: 0;margin-right: 20px;">
					<input id="exampleCheckboxSwitch" type="checkbox" data-bind="checked: login.remember">
					<label for="exampleCheckboxSwitch"></label>
				</div>
				
				<a type="submit" href="#" class="button tiny radius disabled" data-bind="css:{'disabled': (selectedServer() !== -1)? servers()[selectedServer()].status() !== 1 : true }, click: connect" style="flex-shrink: 0;">Connect</a>
			</div>
		</div>
		
		<!-- add server -->
		<div id="add-server-modal" class="reveal-modal menu cant-close small" data-reveal data-bind="with: connect">
			<div class="row">
				<h4>Add Servers</h4>
			</div>
			<form data-bind="event: {'submit': add}">
				<div class="row">
					<input type="text" placeholder="Server Ip" data-bind="value: newServer.ip"/>
				</div>
				<div class="row">
					<a href="#" class="button tiny left secondary" data-reveal-id="connect-modal">Cancel</a>
					<input class="button tiny right" type="submit" value="Ok" />
				</div>
			</form>
		</div>

		<!-- menu -->
		<div id="menu" class="reveal-modal menu full" data-reveal data-bind="with: menu">
			<div class="tabs" data-tab>
				<dd>
					<a href="#profile-tab">Profile</a>
				</dd>
				<dd>
					<a href="#settings-tab">Settings</a>
				</dd>
				<dd>
					<a href="#menu-tab">Menu</a>
				</dd>
			</div>

			<div class="tabs-content">
				<div class="content" id="profile-tab">

					<dl class="tabs vertical" data-tab>
					  	<dd><a href="#profile-stats">Stats</a></dd>
				  		<dd><a href="#profile-players">Players</a></dd>
					  	<dd><a href="#profile-friends">Friends</a></dd>
					</dl>
					<div class="tabs-content vertical" data-bind="with: profile">
					  	<div class="content" id="profile-stats" data-bind="with: playerData">
					    	<h5 data-bind="text: id.name"></h5>
					  	</div>
					  	<div class="content" id="profile-players">
					    	<h5>profile 2.</h5>
					  	</div>
					  	<div class="content" id="profile-friends">
					    	<h5>profile 3.</h5>
					  	</div>
					</div>
				</div>
				<div class="content" id="settings-tab" data-bind="with: settings">
					<dl class="tabs vertical" data-tab>
					  	<dd><a href="#settings-graphics">Graphics</a></dd>
				  		<dd><a href="#settings-controls">Key bindings</a></dd>
					  	<dd><a href="#settings-sound">Sound</a></dd>
					</dl>
					<div class="tabs-content vertical">
					  	<div class="content" id="settings-graphics" data-bind="with: graphics">
					    	<h5>Graphics</h5>
					    	<div class="small-6 columns">
						    	<label><span data-tooltip aria-haspopup="true" class="has-tip tip-top" title="You need to reload the page for the option to take effect">Render Type</span></label>
						    	<select data-bind="value: renderMode, foreach: renderModes">
						    		<option data-bind="text: title, value: value"></option>
						    	</select>
						    	<div class="panel">
						    	  <p data-bind="text: renderModes()[renderMode()].desc()"></p>
						    	</div>
					    	</div>
					    	<div class="small-6 columns">
					    		<label>Camera Mode</label>
						    	<select data-bind="value: cameraMode, foreach: cameraModes">
						    		<option data-bind="text: $data, value: $data"></option>
						    	</select>
						    	<!-- ko if: cameraMode() == 'smooth' -->
					    		<label>Camera Speed</label>
						    	<select data-bind="value: cameraSmoothSpeed, foreach: cameraSmoothSpeeds">
						    		<option data-bind="text: title, value: value"></option>
						    	</select>
						    	<!-- /ko -->
					    	</div>
					  	</div>
					  	<div class="content" id="settings-controls" data-bind="with: keyBindings">
					    	<dl class="tabs" data-tab data-bind="foreach: bindings">
					    		<!-- ko if: display -->
							  	<dd><a data-bind="text: title, attr:{'href': '#keybindings-'+id() }"></a></dd>
							  	<!-- /ko -->
							</dl>
							<div class="tabs-content" data-bind="foreach: bindings">
								<!-- ko if: display -->
							  	<div class="content" data-bind="attr:{'id': 'keybindings-'+id()}">
								    <table>
							    		<thead>
							    			<tr>
							    				<td>Function</td>
							    				<td>Key</td>
							    				<td>Action</td>
							    			</tr>
							    		</thead>
							    		<tbody data-bind="foreach: keys">
							    			<!-- up -->
							    			<tr> 
							    				<td data-bind="text: title"></td>
							    				<td>
							    					<kbd data-bind="text: keyboardMap[keyCode()]"></kbd>
							    				</td>
							    				<td>
							    					<a href="#" class="button tiny radius secondary" style="margin: 0px;" data-bind="click: $parents[1].changeBinding">Change</a>
							    				</td>
							    			</tr>
							    		</tbody>
							    	</table>
								</div>
								<!-- /ko -->
							</div>
					  	</div>
					  	<div class="content" id="settings-sound" data-bind="with: sound">
					    	<h5>Sound</h5>
					    	<div class="small-6">
					    		<label>Master Volume <span class="lable" data-bind="text: Math.round(volume()*100) + '%'"></span></label>
					    		<input type="range" min="0.01" max="1" step="0.01" style="width:100%;" data-bind="value: volume, valueUpdate: 'mousemove'">

						    	<label>Mute</label>
						    	<div class="switch">
								  	<input id="settings-sound-mute" type="checkbox" data-bind="checked: mute">
								  	<label for="settings-sound-mute"></label>
								</div> 
					    	</div>
					  	</div>
					</div>
				</div>
				<div class="content" id="menu-tab" data-bind="with: menu">
					<ul class="stack button-group small-4 small-offset-4">
					  	<li><a href="#" class="button secondary" data-bind="click: disconnect">Disconnect From Server</a></li>
					  	<li><a href="#" class="button secondary" data-bind="click: exit">Exit Game</a></li>
					</ul>
				</div>
			</div>

		  	<a class="close-reveal-modal"><i class="fi-x"></i></a>
		</div>

		<!-- inventory -->
		<div id="inventory" class="reveal-modal menu" data-reveal data-bind="with: menu.profile.playerData">
			<a class="close-reveal-modal" data-keyboard-enable="game">&#215;</a>
			<dl class="tabs" data-tab>
				<dd><a href="#invetory-items">Items</a></dd>
				<dd><a href="#invetory-resources">Resources</a></dd>
				<dd><a href="#invetory-items">Weapons</a></dd>
				<dd><a href="#invetory-items">Tools</a></dd>
			</dl>
			<div class="tabs-content resize">
				<div class="content" id="invetory-items" style="height: 100%;">
					<!-- list of items in the players invertory -->
					<nav class="top-bar" data-topbar data-options="is_hover: false">
						<section class="top-bar-section">
							<ul class="left">
								<!-- dropdowns created by knockout -->
								<li class="has-dropdown">
									<a href="#">Items</a>
									<ul class="dropdown">
										<li><a href="#">Sub-item 1</a></li>
									</ul>
								</li>
							</ul>
					  	</section>
					</nav>
					<ul class="small-block-grid-4 medium-block-grid-5 large-block-grid-6" data-bind="foreach: inventory.items">
						<li>item</li>
					</ul>
				</div>
				<div class="content" id="invetory-resources" style="height: 100%;">
					<!-- list of resources -->
					<div class="small-8 columns scroll-y" style="height: 100%;" data-bind="foreach: inventory.resources">
						<div class="panel">
							<span class="right">31</span>
							<h4>Resource. <small>Small segment header.</small></h4>
						</div>
					</div>
					<div class="small-4 columns" style="height: 100%;">
						<div class="panel full">
							<h2>Resources</h2>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- keybinding -->
		<div id="keybinding">
			Press Any Key
		</div>
	</body>
</html>